// Naming conventions:
// .component-name
// .component-name--modifier
//   .component-name__sub-object
//   .component-name__sub-object--modifier
// Similar to BEM.

@import globals
@import base
@import layout
@import common


// Site header  ////////////////////////

.logo
  +hide-text
  +retina-image(/img/logo-white-sm, 90px 33px)
  +size(90px 30px)
  background-position: center center
  background-repeat: no-repeat
  padding: 50px 0
  @media #{$media-ipad}
    +retina-image(/img/logo-white-lg, 120px 44px)
    +size(120px 44px)
    padding: 90px 0


// Splash section  /////////////////////

.splash
  @extend %text--thinner
  +radial-gradient(circle at 20% 80%, #dee0df, #8c9896, $fallback: #a0aaa9)
  height: 320px
  padding-top: 35px
  position: relative
  @media #{$media-ipad}
    height: 600px

.splash__header
  @extend .l-centered
  +font-header(15, 18)
  text-align: center
  em
    +font-sizes(30, 48)
    display: block
    line-height: 1.1
    font-style: normal
  @media #{$media-ipad}
    padding-top: 25px

$splash-image-width: 650px
$splash-image-height: 420px

.splash__img
  +position(absolute, 0 0 0px -85px)
  +size(($splash-image-width / 2) ($splash-image-height / 2))
  @media #{$media-ipad}
    +size($splash-image-width $splash-image-height)

.splash__drip
  +position(absolute, 160px 50% 0 75px)
  background: $orange
  height: 1px
  &:before
    +position(absolute, -3px 0 0 0px)
    +retina-image('../img/icon/dot-sm', 7px 7px)
    +size(7px)
    content: ""
    display: block
  @media #{$media-ipad}
    top: 280px
    left: 50%
    right: 50%
    margin-right: -140px
    &:before
      +retina-image('../img/icon/dot-lg', 11px 11px)
      +size(11px)
      top: -5px
      left: -5px

.splash__description
  +font-sizes(18, 24)
  +position(absolute, 150px 0 0 50%)
  font-style: italic
  line-height: 1
  margin-left: 20px
  width: 100px
  @media #{$media-ipad}
    width: 200px

.splash__scroller
  +position(absolute, 0 0 30px 50%)
  display: block
  @media #{$media-small}
    +retina-image('../img/icon/scroll-sm', 30px 30px)
    +size(30px)
    margin-left: -15px
  @media #{$media-ipad}
    +retina-image('../img/icon/scroll-lg', 60px 60px)
    +size(60px)
    margin-left: -30px

@media #{$media-ipad}
  .splash__img
    left: 50%
    margin-left: -($splash-image-width / 2)
  .splash__description
    top: 270px
    left: 50%
    margin-left: 160px


// Callouts  ///////////////////////////

.overview
  padding: 50px 30px

.whisper
  @extend %text--thinner
  +font-body(18, 24)
  font-style: italic
  text-align: center

.whisper--big
  +font-sizes(18, 36)

.callout
  +font-header(15, 30)
  margin-top: 40px
  text-align: center
  &:first-child
    margin-top: 0

.callout--with-rule
  @media #{$media-small}
    &:before
      background: $grey-rule
      content: ""
      display: block
      height: 1px
      margin: 0 auto 40px
      width: 75px

.callout em
  +font-sizes(30, 60)
  color: $orange
  display: block
  font-style: normal
  line-height: 1
  margin-top: 5px
  @media #{$media-ipad}
    &.callout__huge
      font-size: 80px

.callout s
  +font-sizes(24, 48)
  display: inline-block
  position: relative
  text-decoration: none
  &:first-of-type
    margin-top: 5px
  &:after
    // TODO: Apply this to Chrome only; it has the opposite effect on Mobile
    // Safari.
    // +backface-visibility(hidden)  // improves rendering on Chrome
    +position(absolute, 45% -7px 0 -7px)
    background-color: $orange
    content: ""
    height: 3px
    opacity: .9
  @media #{$media-ipad}
    &:first-of-type
      margin-top: 20px
    &:after
      height: 5px
  &:nth-of-type(1):after
    +transform(rotate(-1.8deg))
  &:nth-of-type(2):after
    +transform(rotate(2.5deg))
  &:nth-of-type(3):after
    +transform(rotate(-.7deg))

.callout--big
  +font-sizes(24, 48)

.callout--year
  +font-sizes(12, 18)

.callout--small
  +font-sizes(15, 18)


// Things engineers do  ////////////////

.callout.engineers-can
  +font-sizes(24, 30)

.engineers-can ul
  +clearfix
  list-style: none
  padding: 0

.engineers-can__item
  +font-sizes(15, 18)
  background-repeat: no-repeat

@media #{$media-small}
  .engineers-can__item
    background-position: 20px 10px
    border-bottom: 1px solid $grey-rule
    height: 80px
    padding: 20px 0 10px
    padding-left: 120px
    text-align: left
    width: 270px
    margin: 0 auto
    &:first-child
      border-top: 1px solid $grey-rule
  .engineers-can__item--build
    +retina-image('../img/icon/illy-bridge-sm', 74px 60px)
  .engineers-can__item--cure
    +retina-image('../img/icon/illy-cure-sm', 74px 60px)
  .engineers-can__item--send
    +retina-image('../img/icon/illy-space-sm', 74px 60px)

@media #{$media-ipad}
  .engineers-can__item
    +width(1 of 3)
    background-position: center 20px
    border-bottom: 1px solid transparent
    display: inline-block
    float: left
    margin-bottom: 30px
    padding: 170px 40px 60px
  .engineers-can__item--build
    +retina-image('../img/icon/illy-bridge-lg', 160px 130px)
  .engineers-can__item--cure
    +retina-image('../img/icon/illy-cure-lg', 160px 130px)
    border-color: $grey-rule
  .engineers-can__item--send
    +retina-image('../img/icon/illy-space-lg', 160px 130px)


// More callouts further down...  //////

// Meet NEU.
.callout--logo
  +hide-text
  +retina-image(/img/logo-orange-sm, 100px 37px)
  +size(100px 37px)
  font: 0/0 a !important  // IE 8
  margin: 10px auto
  @media #{$media-ipad}
    +retina-image(/img/logo-orange-lg, 200px 74px)
    +size(200px 74px)
    margin: 20px auto

// Graphical callouts, which usually appear next to text callouts.
.callout-img
  background-repeat: no-repeat
  background-position: center center
  margin-top: 40px

.callout-img--america
  +retina-image(/img/map-us-sm, 240px 142px, gif)
  height: 142px
  @media #{$media-ipad}
    +retina-image(/img/map-us-lg, 500px 296px, gif)
    height: 296px
    margin-top: 60px
    margin-bottom: 60px

.callout-img--woman, .callout-img--bang
  height: 129px
  @media #{$media-ipad}
    height: 258px

.callout-img--pie
  +retina-image(/img/icon-pie-chart-sm, 150px 150px, gif)
  +size(150px)
  margin-left: auto
  margin-right: auto
  @media #{$media-ipad}
    +retina-image(/img/icon-pie-chart-lg, 200px 200px, gif)
    +size(200px)
    margin: 60px auto

.callout-img__women
  +retina-image(/img/icon-lady-dark-sm, 26px 55px)
  +size(26px 55px)
  margin: 0 auto
  position: relative
  top: 45px
  @media #{$media-ipad}
    +retina-image(/img/icon-lady-dark-lg, 38px 80px)
    +size(38px 80px)
    top: 60px

.callout-img--california
  +position(absolute, 0px 0 0 50%)
  +retina-image(/img/map-cali-sm, 111px 180px, gif)
  +size(111px 180px)
  margin-left: -110px
  margin-top: 0
  @media #{$media-ipad}
    +retina-image(/img/map-cali-lg, 246px 400px, gif)
    +size(246px 400px)
    margin-left: -100px
    margin-top: 20px

.callout-img--california__pointer
  +retina-image('../img/icon/pointer-sm', 30px 30px)
  +size(30px 30px)
  margin-top: 55px
  margin-left: -3px
  @media #{$media-ipad}
    +retina-image('../img/icon/pointer-lg', 60px 60px)
    +size(60px 60px)
    margin-top: 130px


// Pull quote  /////////////////////////

.quote
  @extend %text--thinner
  @media #{$media-ipad}
    text-align: center
.quote__text
  +font-sizes(30, 50)
  +retina-image('../img/icon/quotes-sm', 30px 30px)
  background-position: center 20px
  background-repeat: no-repeat
  padding-top: 60px
  @media #{$media-ipad}
    +retina-image('../img/icon/quotes-lg', 60px 60px)
    background-position: center 30px
    padding-top: 120px
.quote__author-name
  +font-sizes(18, 24)
  border-top: 1px solid rgba($white, .3)
  margin: 40px 0 10px
  padding-top: 8px
  text-transform: uppercase
  @media #{$media-ipad}
    margin: 80px 0 20px
    padding-top: 20px
.quote__author-title
  @extend %text--header
  font-size: 10px
  letter-spacing: 1px
  line-height: 1.1
  opacity: .6


// Palo Alto  //////////////////////////

.palo-alto
  height: 180px
  overflow: hidden
  position: relative
  @media #{$media-ipad}
    height: 400px

.palo-alto__ribbon
  $width: 160px
  $height: 40px
  +font-header(12, 18)
  @extend .l-centered
  background: $orange
  color: $white
  height: $height
  line-height: 1.1
  margin-bottom: $height + 15px
  overflow: visible
  padding-top: 8px
  position: relative
  text-align: center
  width: $width
  z-index: 1
  &:after
    +position(absolute, 100% 0 0 0px)
    +size(0)
    border: ($width / 2) solid transparent
    border-top: $height solid $orange
    content: ""
    pointer-events: none
    z-index: -1
  @media #{$media-ipad}
    $height: 65px
    $width: 260px
    height: $height
    padding-top: 15px
    width: $width
    &:after
      border-width: $width / 2
      border-top-width: $height

.palo-alto__ribbon__hq
  +font-body(8, 11)
  letter-spacing: 1px
  border-bottom: 1px solid rgba($white, .3)
  margin: 0 20px 8px
  opacity: .7
  padding-bottom: 8px
  @media #{$media-ipad}
    margin: 0 30px 15px
    padding-bottom: 12px

.palo-alto__text
  @extend %text--thinner
  +font-sizes(14, 18)
  +position(absolute, 0 0 0 50%)
  color: $grey-text
  font-style: italic
  line-height: 1.2
  margin-left: 20px
  max-width: 120px
  @media #{$media-ipad}
    max-width: 240px
    margin-left: 110px
    margin-top: 40px


// Highlights/brass tacks  /////////////

.highlight
  +width(1 of 1)
  @extend .grid__item
  text-align: center

  @media #{$media-small-ipad}
    &:first-child:before
      background: $grey-rule
      content: ""
      display: block
      height: 1px
      margin: 40px auto 40px
      width: 75px

  @media #{$media-desk}
    +width(1 of 4)
    position: relative
    text-align: left
    &:before
      +position(absolute, 40px 0 0 ($grid-gutter / 2 + 3))
      background-color: $grey-rule
      content: ""
      display: block
      height: 160px
      width: 1px

.highlight__header
  +font-header(15)
  margin: 40px 0 15px

.highlight__text
  font-size: 18px
  margin: 0 auto
  max-width: 320px


// Meet the team  //////////////////////

.team-header
  +font-header(24, 30)
  line-height: 1.1
  margin: 0
  text-align: center

$team-top-margin: 40px

.team-container
  @extend .grid
  height: 286px + $team-top-margin
  position: relative
  @media #{$media-ipad}
    height: auto

.team
  @extend .grid__item
  +position(absolute, 0px 0px 0px 0px)
  +transform(translate3d(0, 0, 0))  // performance on Mobile Safari
  font-size: 18px
  margin-top: $team-top-margin
  text-align: center
  @media #{$media-ipad}
    +width(1 of 2)
    position: static
  @media #{$media-desk}
    +width(1 of 3)

.team__img
  +size(80px)

.team__name
  margin-top: 20px
  text-transform: uppercase

.team__title
  font-style: italic

.team__details
  margin: 20px auto 0
  max-width: 320px
  @media #{$media-desk}
    text-align: left

.team__arrow
  +size(23px 44px)
  +transition(opacity ease-in 100ms)
  opacity: 1
  position: absolute
  top: 60px
  -webkit-tap-highlight-color: transparent
  z-index: 1
  .team-left-leave ~ &, .team-right-leave ~ &
    +transition-duration(0)
    opacity: 0
  @media #{$media-ipad}
    display: none

.team__arrow--left
  +retina-image('../img/icon/arrow-left', 23px 44px)
  left: $grid-gutter  // account for .grid negative margin

.team__arrow--right
  +retina-image('../img/icon/arrow-right', 23px 44px)
  right: 0

// Slide transitions.
$team-slide-distance: 300px
$team-slide-duration: 300ms
$team-slide-easing: $ease-in-out-quad

.team-left-enter
  +animation(team-left-enter $team-slide-duration $team-slide-easing)
.team-left-leave
  +animation(team-left-leave $team-slide-duration $team-slide-easing)
.team-right-enter
  +animation(team-right-enter $team-slide-duration $team-slide-easing)
.team-right-leave
  +animation(team-right-leave $team-slide-duration $team-slide-easing)

+keyframes(team-left-enter)
  from
    +transform(translateX($team-slide-distance))
  to
    +transform(translateX(0))
+keyframes(team-left-leave)
  from
    +transform(translateX(0))
    opacity: 1
  50%
    opacity: .2
  to
    +transform(translateX(-$team-slide-distance))
    opacity: 0
+keyframes(team-right-enter)
  from
    +transform(translateX(-$team-slide-distance))
  to
    +transform(translateX(0))
+keyframes(team-right-leave)
  from
    +transform(translateX(0))
    opacity: 1
  50%
    opacity: .2
  to
    +transform(translateX($team-slide-distance))
    opacity: 0


// Join us  ////////////////////////////

.join-us
  @extend .l-centered
  max-width: 400px
  text-align: center

.join-us__header
  +font-header(24, 30)
  line-height: 1.1
  margin: 0

.join-us__blurb
  @extend %text--thinner
  font-size: 18px
  font-style: italic
  margin-top: 15px
  &:before
    margin-bottom: 15px
  @media #{$media-ipad}
    margin-bottom: 30px

.join-us
  #{$all-text-inputs}, textarea
    @extend %text--thinner
    font-size: 18px
    border: none
    border-radius: 2px
    color: $black
    display: block
    margin-top: 8px
    padding: 8px 16px
    width: 100%
  textarea
    height: 115px
    .touch &
      // Weird iPhone bug.
      padding-left: 12px

.join-us .placeholder
  @extend %text--thinner
  font-size: 18px
  position: relative
  label
    +position(absolute, 9px 0 0 16px)
    color: #ccc
    display: none
.join-us .placeholder--is-visible label
  display: block !important

.join-us__error
  +font-header(10px)
  +retina-image('../img/icon/error-chevron', 16px 16px)
  background-color: #ffdfd7
  background-position: 15px 7px
  background-repeat: no-repeat
  border-radius: 2px
  color: $orange
  letter-spacing: 1px
  margin-top: 1px
  padding: 9px 20px 7px 41px
  text-align: left

.join-us__error--form
  clear: both
  margin-top: 20px

.join-us__nospam
  +font-header(10)
  float: left
  letter-spacing: 1px
  line-height: 1.1
  margin-left: 15px
  margin-top: 14px
  opacity: .6
  text-align: left

.join-us__buttons
  +clearfix
  margin-top: 5px

.join-us .button
  float: left

.join-us textarea
  resize: none


// Animation following successful submission.
.join-us--done
  +animation(join-us--done 300ms ease-in-out 150ms)
  box-shadow: inset 0 3px 4px -2px rgba($black, .4), inset 0 -3px 4px -2px rgba($black, .4)
+keyframes(join-us--done)
  from
    height: 550px
  to
    height: 0
.join-us__poof-hide
  +animation(join-us__poof-hide 300ms ease-in-out)
  +transform(translateZ(0))
+keyframes(join-us__poof-hide)
  from
    +transform(translateZ(0) scale(1))
    opacity: 1
  to
    +transform(translateZ(0) scale(.5))
    opacity: 0


// Share buttons  //////////////////////

.share
  margin-top: 5px
  padding: 40px 0
  @media #{$media-ipad}
    padding: 80px 0

.share__header
  @extend .callout
  line-height: 1.1
  @media #{$media-ipad}
    margin-bottom: 20px

.share__icons
  text-align: center

.share-icon
  +hide-text
  +size(50px)
  display: inline-block
  margin: 5px
  @media #{$media-ipad}
    +size(70px)
    margin: 18px

@mixin share-icon($type)
  +retina-image("../img/icon/social-#{$type}-sm", 50px 50px)
  &:hover
    +retina-image("../img/icon/social-#{$type}-hover-sm", 50px 50px)
  @media #{$media-ipad}
    +retina-image("../img/icon/social-#{$type}-lg", 70px 70px)
    &:hover
      +retina-image("../img/icon/social-#{$type}-hover-lg", 70px 70px)

.share-icon--facebook
  +share-icon(facebook)
.share-icon--gplus
  +share-icon(gplus)
.share-icon--linkedin
  +share-icon(linkedin)
.share-icon--twitter
  +share-icon(twitter)


// Slideshow  //////////////////////////

.slideshow__mask
  background-image: url(/img/marquee-bottom.gif)
  background-position: center top
  height: 100px

// HACK
.slideshow__slide
  .callout:first-child
    margin-top: 40px
.slideshow__slide.full-bg
  .callout
    margin-top: 0
.slideshow-pre
  margin-top: 1px

@media #{$media-ipad}
  // HACK
  .slideshow-pre .l-pad
    padding-bottom: 0

  // Vertical centering.
  .slideshow__slide
    display: table
    height: 600px
    text-align: center
    width: 100%
    > div
      display: table-cell
      vertical-align: middle
  .slideshow__slide--white
    background: $white
    border-left: 2px solid $grey-rule
    border-bottom: 1px solid $grey-rule

  // This class is only added if the slideshow is available.
  .slideshow
    overflow: hidden
    position: relative

    .slideshow__mask
      +position(absolute, 0px 0px 0 0px)
      height: 600px
      z-index: 20

    .slideshow__slide
      +position(absolute, 0px 0px 0 0px)
      display: block  // override table
      height: 100%
      margin: 0
      padding: 0
      // Vertical centering.
      > div
        display: block  // override table-cell
        position: relative
        top: 50%
      &:first-child
        background-color: $grey-bg
